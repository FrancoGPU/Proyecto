<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Panel de Administrador - GOCINE</title>
    <link rel="stylesheet" href="/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/css/paginas/Administracion/admin.css" />
  </head>
  <body class="admin-page">
    <header class="cine-cabecera">
      <!-- La cabecera se puede cargar dinámicamente o estar fija -->
    </header>

    <main class="main-content">
      <div class="admin-container">
        <h1>Panel de Administrador</h1>
        <div id="admin-message">
          <p>Verificando permisos...</p>
        </div>
        <div class="protected-content" id="admin-main-content">
          <p>Bienvenido al panel de administración.</p>
          <!-- Sección de Gestión de Películas -->
          <section class="admin-section" id="movies-management">
            <h2>Gestionar Películas</h2>
            <button class="btn-add" id="add-movie-btn">
              Añadir Nueva Película
            </button>
            <table id="movies-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Título</th>
                  <th>Género</th>
                  <th>Estreno</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="movies-table-body">
                <!-- Las filas de películas se insertarán aquí -->
              </tbody>
            </table>
          </section>

          <!-- Sección de Gestión de Combos -->
          <section class="admin-section" id="combos-management">
            <h2>Gestionar Combos</h2>
            <button class="btn-add" id="add-combo-btn">
              Añadir Nuevo Combo
            </button>
            <table id="combos-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nombre</th>
                  <th>Precio</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="combos-table-body">
                <!-- Las filas de combos se insertarán aquí -->
              </tbody>
            </table>
          </section>

          <!-- Sección de Gestión de Usuarios -->
          <section class="admin-section" id="users-management">
            <h2>Gestionar Administradores</h2>
            <table id="users-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nombre de Usuario</th>
                  <th>Email</th>
                  <th>Rol</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="users-table-body">
                <!-- Las filas de usuarios se insertarán aquí -->
              </tbody>
            </table>
          </section>
        </div>
      </div>
    </main>

    <!-- Modal para Añadir/Editar Película -->
    <div id="movie-modal" class="modal">
      <div class="modal-content">
        <span class="close-button" id="close-movie-modal">&times;</span>
        <h3 id="movie-modal-title">Añadir Película</h3>
        <form id="movie-form">
          <input type="hidden" id="movie-id" name="id" />

          <label for="movie-title">Título:</label>
          <input type="text" id="movie-title" name="title" required />

          <label for="movie-description">Descripción:</label>
          <textarea
            id="movie-description"
            name="description"
            required
          ></textarea>

          <label for="movie-image">URL de Imagen:</label>
          <input type="text" id="movie-image" name="image" />

          <label for="movie-release_date">Fecha de Estreno:</label>
          <input type="date" id="movie-release_date" name="release_date" />

          <label for="movie-genre">Género:</label>
          <input type="text" id="movie-genre" name="genre" />

          <label for="movie-showtimes">Horarios (separados por coma):</label>
          <input type="text" id="movie-showtimes" name="showtimes" />

          <!-- Campos eliminados: director, duration_minutes, trailer_url, rating -->

          <div class="modal-buttons">
            <button type="button" id="cancel-movie-form">Cancelar</button>
            <button type="submit" id="save-movie-btn">Guardar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal para Añadir/Editar Combo -->
    <div id="combo-modal" class="modal">
      <div class="modal-content">
        <span class="close-button" id="close-combo-modal">&times;</span>
        <h3 id="combo-modal-title">Añadir Combo</h3>
        <form id="combo-form">
          <input type="hidden" id="combo-id" name="id" />
          <label for="combo-name">Nombre:</label>
          <input type="text" id="combo-name" name="name" required />

          <label for="combo-description">Descripción:</label>
          <textarea
            id="combo-description"
            name="description"
            required
          ></textarea>

          <label for="combo-price">Precio:</label>
          <input
            type="number"
            id="combo-price"
            name="price"
            step="0.01"
            required
          />

          <label for="combo-image">URL de Imagen:</label>
          <!-- CAMBIADO: for="combo-image" -->
          <input type="text" id="combo-image" name="image" />
          <!-- CAMBIADO: id="combo-image" name="image" -->

          <div class="modal-buttons">
            <button type="button" id="cancel-combo-form">Cancelar</button>
            <button type="submit" id="save-combo-btn">Guardar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modal para Cambiar Rol de Usuario -->
    <div id="user-role-modal" class="modal">
      <div class="modal-content">
        <span class="close-button" id="close-user-role-modal">&times;</span>
        <h3 id="user-role-modal-title">Cambiar Rol de Usuario</h3>
        <form id="user-role-form">
          <input type="hidden" id="user-id-role" name="id" />
          <p>Usuario: <strong id="user-role-username"></strong></p>
          <label for="user-role-select">Rol:</label>
          <select id="user-role-select" name="role">
            <option value="usuario">Usuario</option>
            <option value="admin">Administrador</option>
          </select>
          <div class="modal-buttons">
            <button type="button" id="cancel-user-role-form">Cancelar</button>
            <button type="submit" id="save-user-role-btn">Guardar Rol</button>
          </div>
        </form>
      </div>
    </div>

    <footer>
      <!-- El pie de página se puede cargar dinámicamente o estar fijo -->
    </footer>

    <script src="/js/paginas/Componentes/piePagina.js"></script>
    <script src="/js/paginas/Componentes/cabecera.js"></script>
    <script src="/js/paginas/Administracion/admin.js"></script>
  </body>
</html>
